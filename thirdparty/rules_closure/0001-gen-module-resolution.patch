From 9b559226d7daf5ffcb3cbc92c22a28304c949537 Mon Sep 17 00:00:00 2001
From: bhaines <bhaines@yext.com>
Date: Thu, 24 Sep 2020 03:03:33 -0400
Subject: [PATCH] gen module resolution

---
 java/com/google/javascript/jscomp/CheckStrictDeps.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git java/com/google/javascript/jscomp/CheckStrictDeps.java java/com/google/javascript/jscomp/CheckStrictDeps.java
index 60f53f2..dfc8702 100644
--- java/com/google/javascript/jscomp/CheckStrictDeps.java
+++ java/com/google/javascript/jscomp/CheckStrictDeps.java
@@ -143,7 +143,7 @@ abstract class CheckStrictDeps
     private void checkNamespaceIsProvided(NodeTraversal t, Node n, String namespace) {
       if (namespace.startsWith("/") || namespace.startsWith(".")) {
         // TODO(jart): Unify path resolution with ModuleLoader.
-        Webpath me = Webpath.get(t.getSourceName());
+        Webpath me = Webpath.get(convertPathToModuleName(t.getSourceName(), state.roots).or(t.getSourceName()));
         if (!me.isAbsolute()) {
           me = Webpath.get("/").resolve(me);
         }
--
2.28.0

